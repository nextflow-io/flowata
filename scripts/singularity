#!/bin/bash -e

SLEEP_TIME=1

case "${1-}" in 
    pull)
        image="${2-}"
        if [ -z $2 ]; then
            echo "Please specify an image"
            exit 1
        fi
        image_file=$(basename $image | sed 's/:/-/g;s/@/@sha256-/g')
        echo "== Pull image $image"
        sleep $SLEEP_TIME
        touch $(pwd)/$image_file.img
        echo "== DONE"
        exit 0
        ;;
    *)
        echo "usage 'singularity pull <image>'"
        exit 1
esac

